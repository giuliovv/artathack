(this.webpackJsonpspesa=this.webpackJsonpspesa||[]).push([[0],{171:function(e,t,a){e.exports=a.p+"static/media/banner_donazione.e146b080.svg"},172:function(e,t,a){e.exports=a.p+"static/media/logo.285086bb.svg"},186:function(e,t,a){e.exports=a(436)},191:function(e,t,a){},192:function(e,t,a){},436:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(13),r=a.n(i),l=(a(191),a(42)),c=a(98),s=a(99),u=a(104),d=a(105),p=a(161),h=a(46),m=(a(192),a(3)),g=a(62),v=a(163),f=a.n(v),b=(a(437),a(201),a(100)),E=a(165),w=a(101),y=a(71),C=a(103),k=a(182),x=a(170),A=a(70),G=a(465),O=a(475),S=a(468),I=a(471),j=a(470),D=a(472),z=a(473),P=a(466),R=a(469),U=a(181),B=a(476),M=a(464),W=a(474),H=a(177),N=a.n(H),L=a(180),F=a.n(L),q=a(467),J=a(175),K=a.n(J),T=a(179),V=a.n(T),_=a(178),Y=a.n(_),Z=a(174),Q=a.n(Z),$=a(176),X=a.n($),ee=a(171),te=a.n(ee),ae=a(172),ne=a.n(ae),oe=[45.4642,9.19];m.initializeApp({apiKey:"AIzaSyADxgU6pKy-sqxGhPHkqAoW_VqG85VsQB8",authDomain:"spesa-2de52.firebaseapp.com",databaseURL:"https://spesa-2de52.firebaseio.com",projectId:"spesa-2de52",storageBucket:"spesa-2de52.appspot.com",messagingSenderId:"232880545893",appId:"1:232880545893:web:57cbf0ac1e002b3625a68c",measurementId:"G-K5TC2JJMH8"}),m.analytics();var ie=Object(U.a)({palette:{background:{default:"#315190"},primary:{main:"#315190"},secondary:{main:"#40bd47"}},status:{danger:"orange"},typography:{h2:{color:"#fed111"},h1:{color:"#fed111"},h5:{color:"white"},fontFamily:"'Baloo Da 2', cursive"}});ie=Object(B.a)(ie);var re=Object(M.a)((function(e){return{text:{padding:e.spacing(2,2,0)},paper:{paddingBottom:50},list:{marginBottom:e.spacing(2),width:250},subheader:{backgroundColor:e.palette.background.paper},appBar:{top:"auto",bottom:0},grow:{flexGrow:1},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"},fullList:{width:"auto"},media:{height:140},footer:{top:"auto",bottom:0,shadows:["none"]},root:{display:"flex","& > *":{margin:e.spacing(1)}}}}));function le(e){var t="Anonimo";m.auth().currentUser.displayName&&(t=m.auth().currentUser.displayName);var a=void 0;return m.auth().currentUser.photoURL&&(a=m.auth().currentUser.photoURL),o.a.createElement(G.a,{position:"fixed",color:"primary",className:re().appBar},o.a.createElement(P.a,null,o.a.createElement(q.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){e.handleChange()}},o.a.createElement(Q.a,null)),o.a.createElement(S.a,{onClick:function(){window.open("https://donazioni.cri.it/donazioni/dona-per-emergenza-coronavirus")},color:"inherit",style:{left:20}},o.a.createElement(R.a,null,"Dona ora!")),o.a.createElement("div",{className:re().grow}),o.a.createElement(O.a,{alt:t,src:a},"A"),o.a.createElement(q.a,{color:"inherit","aria-label":"logout",onClick:function(){m.auth().signOut()}},o.a.createElement(K.a,null))))}function ce(e){var t,a,n="Salvataggio completato.";e.isGeolocationAvailable&&e.isGeolocationEnabled||(n="Salvataggio completato, abilita il gps per salvare il disegno nella tua posizione sul murales."),null==e.coords?(t=oe[0],a=oe[1]):(t=e.coords.latitude,a=e.coords.longitude),localStorage.setItem("arteInsiemeSalvataggio",e.saveableCanvas.getSaveData());var i=m.firestore();return new b.GeoFirestore(i).collection("disegni").doc(m.auth().currentUser.uid).set({disegno:e.saveableCanvas.getSaveData(),base64:e.saveableCanvas.canvasContainer.children[1].toDataURL(),coordinates:new m.firestore.GeoPoint(t,a),timestamp:+new Date}),o.a.createElement(R.a,{color:"textPrimary",style:{textTransform:"lowercase"}},n,o.a.createElement(j.a,{style:{backgroundColor:"transparent"},elevation:0,onClick:function(){return window.open("https://donazioni.cri.it/donazioni/dona-per-emergenza-coronavirus")}},o.a.createElement(I.a,{style:{height:100,backgroundColor:"transparent"},image:te.a,title:"Contemplative Reptile",component:"img"})))}function se(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],i=t[1],r=m.firestore().collection("disegno grande").orderBy("lat","desc");return 0===a.length&&r.get().then((function(e){i(e.docs.map((function(e){return{src:"data:image/png;base64,"+e.data().base64.ci}})))})).catch((function(e){console.log("Error getting documents",e)})),o.a.createElement("div",{style:{overflow:"auto",height:"100vh",display:"block",position:"relative",marginBottom:"700px"}},o.a.createElement(w.a,{photos:a}))}function ue(e){var t,a=m.firestore(),i=new b.GeoFirestore(a),r=Object(n.useState)([]),l=Object(h.a)(r,2),c=l[0],s=l[1],u=Object(n.useState)(0),d=Object(h.a)(u,2),g=d[0],v=d[1],f=Object(n.useState)(!1),E=Object(h.a)(f,2),C=E[0],k=E[1],x=Object(n.useCallback)((function(e,t){t.photo;var a=t.index;v(a),k(!0)}),[]),G=window.innerHeight,O=A.isMobile?void 0:window.innerWidth;return t=e.isGeolocationAvailable&&e.isGeolocationEnabled&&null!=e.coords?i.collection("disegni").near({center:new m.firestore.GeoPoint(e.coords.latitude,e.coords.longitude),radius:1e3}).limit(30):i.collection("disegni").near({center:new m.firestore.GeoPoint(oe[0],oe[1]),radius:1e3}).limit(30),0===c.length&&t.get().then((function(e){s(e.docs.map((function(e){return{src:e.data().base64,height:G,width:O}})))})),c.lenght<1?o.a.createElement("p",null,"Ancora non ci sono immagini in questa zona, aggiungi tu la prima!"):o.a.createElement("div",{style:{overflow:"auto",height:"100vh",display:"block",position:"relative",marginBottom:"700px"}},o.a.createElement(w.a,{photos:c,onClick:x}),o.a.createElement(y.b,null,C?o.a.createElement(y.a,{onClose:function(){v(0),k(!1)}},o.a.createElement(y.c,{currentIndex:g,views:c.map((function(e){return Object(p.a)({},e,{srcset:e.srcSet,caption:e.title})}))})):null))}function de(e){return e.vistaMappa?o.a.createElement(se,null):o.a.createElement(ue,{isGeolocationAvailable:e.isGeolocationAvailable,isGeolocationEnabled:e.isGeolocationEnabled,coords:e.coords})}var pe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={color:"#444",datiDisegno:null,giaFatto:!1,vistaMappa:!1},e.handleChangeComplete=function(t,a){e.setState({color:t.hex})},e.handleChange=function(){e.setState({vistaMappa:!e.state.vistaMappa})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("arteInsiemeSalvataggio");m.firestore().collection("disegni").doc(m.auth().currentUser.uid).get().then((function(t){if(t.exists){var a=t.data().d.disegno;void 0!==a&&e.setState({datiDisegno:a}).catch((function(e){}))}})).catch((function(a){null!=t&&e.setState({datiDisegno:t})}))}},{key:"render",value:function(){var e=this;return this.props.vistaDisegni?o.a.createElement("div",null,o.a.createElement(D.a,{color:"secondary","aria-label":"colore",style:{margin:0,zIndex:1,top:"auto",right:20,bottom:80,left:"auto",position:"fixed"}},o.a.createElement(X.a,{style:{color:"white"},onClick:function(){return e.handleChange()}})),o.a.createElement(de,{isGeolocationAvailable:this.props.isGeolocationAvailable,isGeolocationEnabled:this.props.isGeolocationEnabled,coords:this.props.coords,vistaMappa:this.state.vistaMappa})):o.a.createElement("div",null,o.a.createElement(D.a,{color:"secondary","aria-label":"colore",style:{margin:0,zIndex:1,top:"auto",right:20,bottom:260,left:"auto",position:"fixed"}},o.a.createElement(C.a,{trigger:o.a.createElement(N.a,{style:{color:"white"}}),position:"left center"},o.a.createElement(x.GithubPicker,{triangle:"hide",color:this.state.color,onChangeComplete:this.handleChangeComplete,disableAlpha:!0}))),o.a.createElement(D.a,{color:"secondary","aria-label":"save",style:{margin:0,zIndex:1,top:"auto",right:20,bottom:200,left:"auto",position:"fixed"}},o.a.createElement(C.a,{trigger:o.a.createElement(Y.a,{style:{color:"white"}}),position:"left center"},o.a.createElement(ce,{isGeolocationAvailable:this.props.isGeolocationAvailable,isGeolocationEnabled:this.props.isGeolocationEnabled,coords:this.props.coords,saveableCanvas:this.saveableCanvas}))),o.a.createElement(D.a,{color:"secondary","aria-label":"undo",style:{margin:0,zIndex:1,right:20,bottom:140,left:"auto",position:"fixed"}},o.a.createElement(V.a,{onClick:function(){e.saveableCanvas.undo()},style:{color:"white"}})),o.a.createElement(D.a,{color:"secondary","aria-label":"clear",style:{margin:0,zIndex:1,top:"auto",right:20,bottom:80,left:"auto",position:"fixed"}},o.a.createElement(F.a,{onClick:function(){e.saveableCanvas.clear()},style:{color:"white"}})),o.a.createElement(k.a,{hideInterface:!!A.isMobile,ref:function(t){e.saveableCanvas=t},lazyRadius:0,brushRadius:A.isMobile?3:7,saveData:this.state.datiDisegno,brushColor:this.state.color,style:{width:window.innerWidth,height:window.innerHeight-65,zIndex:-1,position:"absolute"}}))}}]),a}(o.a.Component);function he(){return o.a.createElement(G.a,{position:"fixed",color:"primary",className:re().footer,elevation:0},o.a.createElement(P.a,null,o.a.createElement(S.a,{color:"secondary",onClick:function(){return window.open("https://www.privacypolicygenerator.info/live.php?token=bOaq2FxZvBZ3mJY3PESMHOe27PREKKjp")}},"Privacy policy"),o.a.createElement("div",{className:re().grow}),o.a.createElement(R.a,null,"Sponsorizzato da:"),o.a.createElement(S.a,{color:"secondary",onClick:function(){return window.open("https://www.morocolor.it/")}},"Primo")))}var me=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isSignedIn:!1},e.uiConfig={signInFlow:"popup",signInOptions:[m.auth.GoogleAuthProvider.PROVIDER_ID,g.auth.AnonymousAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},e.handleChange=function(){e.setState({vistaDisegni:!e.state.vistaDisegni})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unregisterAuthObserver=m.auth().onAuthStateChanged((function(t){return e.setState({isSignedIn:!!t})}))}},{key:"componentWillUnmount",value:function(){this.unregisterAuthObserver()}},{key:"render",value:function(){var e;return this.state.isSignedIn?o.a.createElement("div",null,o.a.createElement(le,{vistaDisegni:this.state.vistaDisegni,handleChange:this.handleChange}),o.a.createElement(pe,{isGeolocationAvailable:this.props.isGeolocationAvailable,isGeolocationEnabled:this.props.isGeolocationEnabled,coords:this.props.coords,vistaDisegni:this.state.vistaDisegni})):o.a.createElement("div",null,o.a.createElement("div",{style:{backgroundColor:"#315190"}},o.a.createElement(z.a,(e={container:!0,spacing:5,direction:"column",alignItems:"center",justify:"center"},Object(l.a)(e,"spacing",1),Object(l.a)(e,"style",{minHeight:"100vh",overflowY:"scroll"}),e),o.a.createElement(z.a,{item:!0,xs:12},o.a.createElement(j.a,{style:{maxWidth:345,backgroundColor:"transparent",marginBottom:"-50px"},elevation:0},o.a.createElement(I.a,{style:{height:170,backgroundColor:"transparent"},image:ne.a,title:"Contemplative Reptile",component:"img"}))),o.a.createElement(z.a,{item:!0,xs:12},o.a.createElement(R.a,{variant:"h1",component:"h2"},"Art@Hack")),o.a.createElement(z.a,{item:!0,xs:12},o.a.createElement(R.a,{variant:"h5",component:"h5"},"Una grande opera d'arte collettiva.")),o.a.createElement(z.a,{item:!0,xs:12},o.a.createElement(f.a,{uiConfig:this.uiConfig,firebaseAuth:m.auth()})))),o.a.createElement(he,null))}}]),a}(o.a.Component);var ge=Object(E.geolocated)({positionOptions:{enableHighAccuracy:!1},watchPosition:!0,userDecisionTimeout:5e3})((function(e){return o.a.createElement("div",null,o.a.createElement(W.a,{theme:ie},o.a.createElement(me,{isGeolocationAvailable:e.isGeolocationAvailable,isGeolocationEnabled:e.isGeolocationEnabled,coords:e.coords})))})),ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ge,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/spesa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/spesa","/service-worker.js");ve?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):fe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):fe(t,e)}))}}()}},[[186,1,2]]]);
//# sourceMappingURL=main.beea236f.chunk.js.map