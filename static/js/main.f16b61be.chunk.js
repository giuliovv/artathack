(this.webpackJsonpspesa=this.webpackJsonpspesa||[]).push([[0],{169:function(e,t,a){e.exports=a.p+"static/media/logo.285086bb.svg"},184:function(e,t,a){e.exports=a(434)},189:function(e,t,a){},190:function(e,t,a){},434:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),i=a(13),r=a.n(i),l=(a(189),a(97)),s=a(98),c=a(102),u=a(103),d=a(179),m=a(69),p=(a(190),a(3)),h=a(60),g=a(160),v=a.n(g),b=(a(435),a(199),a(99)),f=a(162),E=a(163),w=a(70),y=a(68),C=a(180),x=a(168),k=a(101),A=a(463),G=a(473),I=a(466),O=a(471),S=a(470),D=a(468),j=a(469),P=a(464),z=a(467),B=a(178),U=a(474),R=a(462),H=a(472),W=a(174),M=a.n(W),F=a(177),N=a.n(F),q=a(465),J=a(172),K=a.n(J),L=a(176),V=a.n(L),T=a(173),_=a.n(T),Z=a(175),Q=a.n(Z),Y=a(171),$=a.n(Y),X=a(169),ee=a.n(X),te=[45.4642,9.19];p.initializeApp({apiKey:"AIzaSyADxgU6pKy-sqxGhPHkqAoW_VqG85VsQB8",authDomain:"spesa-2de52.firebaseapp.com",databaseURL:"https://spesa-2de52.firebaseio.com",projectId:"spesa-2de52",storageBucket:"spesa-2de52.appspot.com",messagingSenderId:"232880545893",appId:"1:232880545893:web:57cbf0ac1e002b3625a68c",measurementId:"G-K5TC2JJMH8"}),p.analytics();var ae=Object(B.a)({palette:{background:{default:"#315190"},primary:{main:"#315190"},secondary:{main:"#40bd47"}},status:{danger:"orange"},typography:{h2:{color:"#fed111"},h1:{color:"#fed111"},fontFamily:"'Baloo Da 2', cursive"}});ae=Object(U.a)(ae);var oe=Object(R.a)((function(e){return{text:{padding:e.spacing(2,2,0)},paper:{paddingBottom:50},list:{marginBottom:e.spacing(2),width:250},subheader:{backgroundColor:e.palette.background.paper},appBar:{top:"auto",bottom:0},grow:{flexGrow:1},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"},fullList:{width:"auto"},media:{height:140},footer:{top:"auto",bottom:0,shadows:["none"]},root:{display:"flex","& > *":{margin:e.spacing(1)}}}}));function ne(e){var t="Anonimo";p.auth().currentUser.displayName&&(t=p.auth().currentUser.displayName);var a=void 0;return p.auth().currentUser.photoURL&&(a=p.auth().currentUser.photoURL),n.a.createElement(A.a,{position:"fixed",color:"primary",className:oe().appBar},n.a.createElement(P.a,null,n.a.createElement(q.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){e.handleChange()}},n.a.createElement($.a,null)),n.a.createElement(I.a,{onClick:function(){window.open("https://www.gofundme.com/f/hackhome-sostieni-gli-ospedali-della-lombardia")},color:"inherit",style:{left:20}},n.a.createElement(z.a,null,"Dona ora!")),n.a.createElement("div",{className:oe().grow}),n.a.createElement(G.a,{alt:t,src:a},"A"),n.a.createElement(q.a,{color:"inherit","aria-label":"logout",onClick:function(){p.auth().signOut()}},n.a.createElement(K.a,null))))}function ie(e){var t,a,o="Salvataggio completato.";e.isGeolocationAvailable&&e.isGeolocationEnabled||(o="Salvataggio completato, abilita il gps per salvare il disegno nella tua posizione sul murales."),null==e.coords?(t=te[0],a=te[1]):(t=e.coords.latitude,a=e.coords.longitude),localStorage.setItem("arteInsiemeSalvataggio",e.saveableCanvas.getSaveData());var i=p.firestore();return new b.GeoFirestore(i).collection("disegni").doc(p.auth().currentUser.email).set({disegno:e.saveableCanvas.getSaveData(),base64:e.saveableCanvas.canvasContainer.children[1].toDataURL(),coordinates:new p.firestore.GeoPoint(t,a),timestamp:+new Date}),n.a.createElement(z.a,{color:"textPrimary",style:{textTransform:"lowercase"}},o)}function re(e){var t,a=p.firestore(),i=new b.GeoFirestore(a),r=Object(o.useState)([]),l=Object(m.a)(r,2),s=l[0],c=l[1],u=Object(o.useState)(0),h=Object(m.a)(u,2),g=h[0],v=h[1],f=Object(o.useState)(!1),y=Object(m.a)(f,2),C=y[0],x=y[1],A=Object(o.useCallback)((function(e,t){t.photo;var a=t.index;v(a),x(!0)}),[]),G=window.innerHeight,I=k.isMobile?void 0:window.innerWidth;return t=e.isGeolocationAvailable&&e.isGeolocationEnabled&&null!=e.coords?i.collection("disegni").near({center:new p.firestore.GeoPoint(e.coords.latitude,e.coords.longitude),radius:1e3}).limit(30):i.collection("disegni").near({center:new p.firestore.GeoPoint(te[0],te[1]),radius:1e3}).limit(30),0===s.length&&t.get().then((function(e){c(e.docs.map((function(e){return{src:e.data().base64,height:G,width:I}})))})),s.lenght<1?n.a.createElement("p",null,"Ancora non ci sono immagini in questa zona, aggiungi tu la prima!"):n.a.createElement("div",{style:{overflow:"auto",height:"100vh",display:"block",position:"relative",marginBottom:"700px"}},n.a.createElement(E.a,{photos:s,onClick:A}),n.a.createElement(w.b,null,C?n.a.createElement(w.a,{onClose:function(){v(0),x(!1)}},n.a.createElement(w.c,{currentIndex:g,views:s.map((function(e){return Object(d.a)({},e,{srcset:e.srcSet,caption:e.title})}))})):null))}var le=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(l.a)(this,a);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={color:"#444",datiDisegno:null,giaFatto:!1},e.handleChangeComplete=function(t,a){e.setState({color:t.hex})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("arteInsiemeSalvataggio");p.firestore().collection("disegni").doc(p.auth().currentUser.uid).get().then((function(t){if(t.exists){var a=t.data().d.disegno;void 0!==a&&e.setState({datiDisegno:a}).catch((function(e){}))}})).catch((function(a){null!=t&&e.setState({datiDisegno:t})}))}},{key:"render",value:function(){var e=this;return this.props.vistaDisegni?n.a.createElement(re,{isGeolocationAvailable:this.props.isGeolocationAvailable,isGeolocationEnabled:this.props.isGeolocationEnabled,coords:this.props.coords}):n.a.createElement("div",null,n.a.createElement(D.a,{color:"secondary","aria-label":"altro",style:{margin:0,zIndex:1,top:"auto",right:20,bottom:80,left:"auto",position:"fixed"}},n.a.createElement(y.a,{trigger:n.a.createElement(_.a,{style:{color:"white"}}),position:"left center"},n.a.createElement(D.a,{color:"secondary","aria-label":"colore",style:{margin:0,zIndex:1,top:"auto",right:20,bottom:260,left:"auto",position:"fixed"}},n.a.createElement(y.a,{trigger:n.a.createElement(M.a,{style:{color:"white"}}),position:"left center"},n.a.createElement(x.SketchPicker,{color:this.state.color,onChangeComplete:this.handleChangeComplete,disableAlpha:!0}))),n.a.createElement(D.a,{color:"secondary","aria-label":"save",style:{margin:0,zIndex:1,top:"auto",right:20,bottom:200,left:"auto",position:"fixed"}},n.a.createElement(y.a,{trigger:n.a.createElement(Q.a,{style:{color:"white"}}),position:"left center"},n.a.createElement(ie,{isGeolocationAvailable:this.props.isGeolocationAvailable,isGeolocationEnabled:this.props.isGeolocationEnabled,coords:this.props.coords,saveableCanvas:this.saveableCanvas}))),n.a.createElement(D.a,{color:"secondary","aria-label":"undo",style:{margin:0,zIndex:1,right:20,bottom:140,left:"auto",position:"fixed"}},n.a.createElement(V.a,{onClick:function(){e.saveableCanvas.undo()},style:{color:"white"}})),n.a.createElement(D.a,{color:"secondary","aria-label":"clear",style:{margin:0,zIndex:1,top:"auto",right:20,bottom:80,left:"auto",position:"fixed"}},n.a.createElement(N.a,{onClick:function(){e.saveableCanvas.clear()},style:{color:"white"}})))),n.a.createElement(C.a,{hideInterface:!!k.isMobile,ref:function(t){e.saveableCanvas=t},saveData:this.state.datiDisegno,brushColor:this.state.color,style:{width:window.innerWidth,height:window.innerHeight-65,zIndex:-1,position:"absolute"}}))}}]),a}(n.a.Component);function se(){return n.a.createElement(A.a,{position:"fixed",color:"primary",className:oe().footer,elevation:0},n.a.createElement(P.a,null,n.a.createElement(I.a,{color:"secondary",onClick:function(){return window.open("https://www.privacypolicygenerator.info/live.php?token=bOaq2FxZvBZ3mJY3PESMHOe27PREKKjp")}},"Privacy policy"),n.a.createElement("div",{className:oe().grow}),n.a.createElement(z.a,null,"Sponsorizzato da:"),n.a.createElement(I.a,{color:"secondary",onClick:function(){return window.open("https://www.morocolor.it/")}},"Primo")))}var ce=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(l.a)(this,a);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={isSignedIn:!1},e.uiConfig={signInFlow:"popup",signInOptions:[p.auth.GoogleAuthProvider.PROVIDER_ID,h.auth.AnonymousAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},e.handleChange=function(){e.setState({vistaDisegni:!e.state.vistaDisegni})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unregisterAuthObserver=p.auth().onAuthStateChanged((function(t){return e.setState({isSignedIn:!!t})}))}},{key:"componentWillUnmount",value:function(){this.unregisterAuthObserver()}},{key:"render",value:function(){return this.state.isSignedIn?n.a.createElement("div",null,n.a.createElement(ne,{vistaDisegni:this.state.vistaDisegni,handleChange:this.handleChange}),n.a.createElement(le,{isGeolocationAvailable:this.props.isGeolocationAvailable,isGeolocationEnabled:this.props.isGeolocationEnabled,coords:this.props.coords,vistaDisegni:this.state.vistaDisegni})):n.a.createElement("div",null,n.a.createElement("div",{style:{backgroundColor:"#315190"}},n.a.createElement(j.a,{container:!0,spacing:5,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},n.a.createElement(j.a,{item:!0,xs:12},n.a.createElement(S.a,{style:{maxWidth:345,backgroundColor:"transparent",marginBottom:"-50px"},elevation:0},n.a.createElement(O.a,{style:{height:200,backgroundColor:"transparent"},image:ee.a,title:"Contemplative Reptile",component:"img"}))),n.a.createElement(j.a,{item:!0,xs:12},n.a.createElement(z.a,{variant:"h1",component:"h2"},"Art@Hack")),n.a.createElement(j.a,{item:!0,xs:12},n.a.createElement(v.a,{uiConfig:this.uiConfig,firebaseAuth:p.auth()})))),n.a.createElement(se,null))}}]),a}(n.a.Component);var ue=Object(f.geolocated)({positionOptions:{enableHighAccuracy:!1},watchPosition:!0,userDecisionTimeout:5e3})((function(e){return n.a.createElement("div",null,n.a.createElement(H.a,{theme:ae},n.a.createElement(ce,{isGeolocationAvailable:e.isGeolocationAvailable,isGeolocationEnabled:e.isGeolocationEnabled,coords:e.coords})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[184,1,2]]]);
//# sourceMappingURL=main.f16b61be.chunk.js.map