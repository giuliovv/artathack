(this.webpackJsonpspesa=this.webpackJsonpspesa||[]).push([[0],{144:function(e,t,a){e.exports=a(332)},149:function(e,t,a){},150:function(e,t,a){},332:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(30),r=a.n(i),l=(a(149),a(57)),s=a(58),c=a(59),u=a(60),d=(a(150),a(3)),h=(a(82),a(123)),m=a.n(h),p=(a(333),a(159),a(125)),g=a(126),v=a(79),b=a(140),f=a(130),E=a(131),y=a(367),C=a(365),w=a(362),I=a(363),x=a(359),k=a(361),A=a(139),G=a(366),O=a(358),D=a(364),S=a(135),j=a.n(S),P=a(138),z=a.n(P),B=a(360),U=a(134),H=a.n(U),R=a(137),W=a.n(R),L=a(136),M=a.n(L),J=a(133),N=a.n(J);d.initializeApp({apiKey:"AIzaSyADxgU6pKy-sqxGhPHkqAoW_VqG85VsQB8",authDomain:"spesa-2de52.firebaseapp.com",databaseURL:"https://spesa-2de52.firebaseio.com",projectId:"spesa-2de52",storageBucket:"spesa-2de52.appspot.com",messagingSenderId:"232880545893",appId:"1:232880545893:web:57cbf0ac1e002b3625a68c",measurementId:"G-K5TC2JJMH8"}),d.analytics();var q=Object(A.a)({palette:{background:{default:"#315190"},primary:{main:"#315190"},secondary:{main:"#349f3a"}},status:{danger:"orange"},typography:{h2:{color:"#f5cf2d"},h1:{color:"#f5cf2d"}}});q=Object(G.a)(q);var F=Object(O.a)((function(e){return{text:{padding:e.spacing(2,2,0)},paper:{paddingBottom:50},list:{marginBottom:e.spacing(2),width:250},subheader:{backgroundColor:e.palette.background.paper},appBar:{top:"auto",bottom:0},grow:{flexGrow:1},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"},fullList:{width:"auto"},root:{display:"flex","& > *":{margin:e.spacing(1)}}}}));function K(e){return o.a.createElement(y.a,{position:"fixed",color:"primary",className:F().appBar},o.a.createElement(x.a,null,o.a.createElement(B.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){e.handleChange()}},o.a.createElement(N.a,null)),o.a.createElement("div",{className:F().grow}),o.a.createElement(C.a,{alt:d.auth().currentUser.displayName,src:d.auth().currentUser.photoURL}),o.a.createElement(B.a,{color:"inherit","aria-label":"logout",onClick:function(){d.auth().signOut()}},o.a.createElement(H.a,null))))}function V(e){if(!e.isGeolocationAvailable)return o.a.createElement(k.a,{color:"textPrimary",style:{"text-transform":"lowercase"}},"La posizione non \xe8 disponibile :(");if(!e.isGeolocationEnabled)return o.a.createElement(k.a,{color:"textPrimary",style:{"text-transform":"lowercase"}},"Per favore abilita il GPS per salvare.");if(e.isGeolocationAvailable&&e.isGeolocationEnabled&&null!=e.coords){localStorage.setItem("arteInsiemeSalvataggio",e.saveableCanvas.getSaveData());var t=d.firestore();new p.GeoFirestore(t).collection("disegni").doc(d.auth().currentUser.email).set({disegno:e.saveableCanvas.getSaveData(),base64:e.saveableCanvas.canvasContainer.children[1].toDataURL(),coordinates:new d.firestore.GeoPoint(e.coords.latitude,e.coords.longitude)})}return o.a.createElement(k.a,{color:"textPrimary"},"Salvataggio completato.")}var T=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("p",null,"CIAONE")}}]),a}(o.a.Component),_=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={color:"#444",datiDisegno:null,giaFatto:!1},e.handleChangeComplete=function(t,a){e.setState({color:t.hex})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("arteInsiemeSalvataggio");d.firestore().collection("disegni").doc(d.auth().currentUser.email).get().then((function(t){if(t.exists){var a=t.data().d.disegno;void 0!==a&&e.setState({datiDisegno:a}).catch((function(e){}))}})).catch((function(a){null!=t&&e.setState({datiDisegno:t})}))}},{key:"render",value:function(){var e=this;return this.props.vistaDisegni?o.a.createElement(T,null):o.a.createElement("div",null,o.a.createElement(w.a,{color:"secondary","aria-label":"colore",style:{margin:0,zIndex:1,top:"auto",right:20,bottom:260,left:"auto",position:"fixed"}},o.a.createElement(v.a,{trigger:o.a.createElement(j.a,null),position:"left center"},o.a.createElement(f.SketchPicker,{color:this.state.color,onChangeComplete:this.handleChangeComplete,disableAlpha:!0}))),o.a.createElement(w.a,{color:"secondary","aria-label":"save",style:{margin:0,zIndex:1,top:"auto",right:20,bottom:200,left:"auto",position:"fixed"}},o.a.createElement(v.a,{trigger:o.a.createElement(M.a,null),position:"left center"},o.a.createElement(V,{isGeolocationAvailable:this.props.isGeolocationAvailable,isGeolocationEnabled:this.props.isGeolocationEnabled,coords:this.props.coords,saveableCanvas:this.saveableCanvas}))),o.a.createElement(w.a,{color:"secondary","aria-label":"undo",style:{margin:0,zIndex:1,right:20,bottom:140,left:"auto",position:"fixed"}},o.a.createElement(W.a,{onClick:function(){e.saveableCanvas.undo()}})),o.a.createElement(w.a,{color:"secondary","aria-label":"clear",style:{margin:0,zIndex:1,top:"auto",right:20,bottom:80,left:"auto",position:"fixed"}},o.a.createElement(z.a,{onClick:function(){e.saveableCanvas.clear()}})),o.a.createElement(b.a,{hideInterface:!!E.isMobile,ref:function(t){e.saveableCanvas=t},saveData:this.state.datiDisegno,brushColor:this.state.color,style:{width:window.innerWidth,height:window.innerHeight-65,zIndex:-1,position:"absolute"}}))}}]),a}(o.a.Component),Q=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isSignedIn:!1},e.uiConfig={signInFlow:"popup",signInOptions:[d.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},e.handleChange=function(){e.setState({vistaDisegni:!e.state.vistaDisegni})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unregisterAuthObserver=d.auth().onAuthStateChanged((function(t){return e.setState({isSignedIn:!!t})}))}},{key:"componentWillUnmount",value:function(){this.unregisterAuthObserver()}},{key:"render",value:function(){return this.state.isSignedIn?o.a.createElement("div",null,o.a.createElement(K,{vistaDisegni:this.state.vistaDisegni,handleChange:this.handleChange}),o.a.createElement(_,{isGeolocationAvailable:this.props.isGeolocationAvailable,isGeolocationEnabled:this.props.isGeolocationEnabled,coords:this.props.coords,vistaDisegni:this.state.vistaDisegni})):o.a.createElement("div",{style:{backgroundColor:"#315190"}},o.a.createElement(I.a,{container:!0,spacing:5,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},o.a.createElement(I.a,{item:!0,xs:12},o.a.createElement(k.a,{variant:"h1",component:"h2"},"Art@Hack")),o.a.createElement(I.a,{item:!0,xs:12},o.a.createElement(m.a,{uiConfig:this.uiConfig,firebaseAuth:d.auth()}))))}}]),a}(o.a.Component);var $=Object(g.geolocated)({positionOptions:{enableHighAccuracy:!1},watchPosition:!0,userDecisionTimeout:5e3})((function(e){return o.a.createElement("div",null,o.a.createElement(D.a,{theme:q},o.a.createElement(Q,{isGeolocationAvailable:e.isGeolocationAvailable,isGeolocationEnabled:e.isGeolocationEnabled,coords:e.coords})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[144,1,2]]]);
//# sourceMappingURL=main.50b6a281.chunk.js.map